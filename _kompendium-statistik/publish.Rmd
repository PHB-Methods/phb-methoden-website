---
title: "Statistik Kompendium - "
author: "Esther Weidauer"
date: "2024-09-04"
---

# Statistik-Kompendium in Webseite integrieren

Diesen Code-Chunk hier ausführen, um die Seiten für Statistik I und II in die Website zu integrieren.

Beide RMarkdown-Dokumente werden in normales Markdown umgewandelt und Grafiken sowie R-Output erzeugt.

Anschließend werden die erzeugten Markdown-Seiten und die Grafiken an die richtige Stelle kopiert,
so dass der Website-Generator sie findet und im Layout der Website veröffentlicht.

```{r include=FALSE}
library(rmarkdown)

build <- function(rmd_name) {
  base_name <- gsub("\\.rmd", "", ignore.case = TRUE, rmd_name)
  md_name <- paste0(base_name, ".md")
  yml_name <- paste0(base_name, ".yml")
  files_dir <- base_name
  target_base_dir <- file.path("..", "lehre", "kompendium-statistik")
  
  target_md <- file.path(target_base_dir, md_name)
  target_files_dir <- file.path(target_base_dir, files_dir)
  
  rmarkdown::render(rmd_name, envir = new.env(), runtime = "static")
  
  if (file.exists(target_md)) {
    unlink(target_md)
  }
    
  if (dir.exists(target_files_dir)) {
    unlink(target_files_dir, recursive = TRUE)
  }
  
  dir.create(target_files_dir, recursive = TRUE, showWarnings = FALSE)
  
  file.copy(md_name, target_md)
  
  for (f in list.files(path = files_dir, full.names = TRUE)) {
    print(f)
    file.copy(f, file.path(target_base_dir, f))
  }
  
  # yml <- read_file(yml_name)
  # md <- paste0(yml, read_file(target_md))
  # write_file(md, target_md)
}

build("statistik-1.Rmd")
build("statistik-2.Rmd")
```